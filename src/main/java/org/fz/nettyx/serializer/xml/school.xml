<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<root namespace="school">

    <model-mapping>
        <student>66AA</student>
        <teacher>7A01</teacher>
    </model-mapping>

    <enum>
        <country>
            CHINA,
            USA,
            JAPAN
        </country>

        <gender>
            FEMAIL,
            MAIl
        </gender>
    </enum>

    <!--建议使用专门的xml来保存协议中所有开关-->
    <switch>
        <course>
            NATURAL,
            MEDICINE,
            NOTUSED
        </course>
    </switch>

    <model>
        <student>
            <id :offset="0" :length="2" :type="string(utf-8)"/>
            <age :offset="2" :length="1" :type="byte"/>
            <name :offset="3" :length="2" :type="string(utf-8)"/>
            <gender :offset="5" :length="1" :type="enum(gender)"/>
            <country-array :offset="6" :length="2" :array-length="2" :type="enum(country)"/>
            <maincourse :offset="8" :length="1" :type="switch(course)"/>
            <phonenum-array :offset="9" :length="4" :array-length="2" :type="int"/>
            <secondarycours-array :offset="13" :length="8" :array-length="2" :type="switch(course)"/>
            <address-array :offset="21" :length="2" :array-length="3" :type="string(utf-8)"/>
        </student>

        <teacher>
            <id :offset="92" :length="2" :type="string(us-ascii)"/>
            <name :offset="94" :length="2" :type="int"/>
        </teacher>
    </model>

    <student>
        <id :offset="0" :length="2" :type="string(utf-8)">&#0;&#0;</id>
        <age :offset="2" :length="1" :type="byte">0</age>
        <name :offset="3" :length="2" :type="string(utf-8)">&#0;&#0;</name>
        <gender :offset="5" :length="1" :type="enum(gender)">FEMAIL</gender>
        <country-array :offset="6" :length="2" :array-length="2" :type="enum(country)">
            <country :offset="6" :length="1" :type="enum(country)">CHINA</country>
            <country :offset="7" :length="1" :type="enum(country)">CHINA</country>
        </country-array>
        <phonenum-array :offset="9" :length="4" :array-length="2" :type="int">
            <phonenum :offset="9" :length="2" :type="int">0</phonenum>
            <phonenum :offset="11" :length="2" :type="int">0</phonenum>
        </phonenum-array>
        <secondarycours-array :offset="13" :length="8" :array-length="2" :type="switch(course)">
            <secondarycours :offset="13" :length="4" :type="switch(course)">1</secondarycours>
            <secondarycours :offset="17" :length="4" :type="switch(course)">1</secondarycours>
        </secondarycours-array>
        <address-array :offset="21" :length="2" :array-length="2" :type="string(utf-8)">
            <address :offset="21" :length="1" :type="string(utf-8)">&#0;&#0;</address>
            <address :offset="22" :length="1" :type="string(utf-8)">&#0;&#0;</address>
        </address-array>
    </student>
</root>



 

 